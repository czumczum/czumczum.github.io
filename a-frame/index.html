<!DOCTYPE html>
<html xmlns="">
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/nunjucks/2.3.0/nunjucks.min.js"></script>
      <script src="js/vendors/k-frame.js"></script>
      <script src="https://rawgit.com/donmccurdy/aframe-extras/v2.1.1/dist/aframe-extras.loaders.min.js"></script>
      <script src="js/update-raycaster.js"></script>
      <script src="js/set-image.js"></script>
  </head>
  <body>
  <a-scene stats inspector="url: https://aframe.io/releases/0.3.0/aframe-inspector.min.js">
      <a-assets>
          <img id="woody"
               src="img/bg/woodpeacker.png">
          <img id="city"
               src="img/city.jpg">
          <img id="city-thumb"
               src="img/city-thumb.jpg">
          <img id="sunset"
               crossorigin="anonymous"
               src="img/Sunset.jpg">
          <img id="desert"
               src="img/desert.jpg">
          <img id="desert-thumb"
               src="img/desert-thumb.jpg">
          <img id="mount"
               src="img/mount.jpg">
          <img id="mount-thumb"
               src="img/mount-thumb.jpg">
          <a-asset item id="applePly" src="img/apple.bake.ply"></a-asset>
          <a-asset item id="appleObj" src="img/apple.obj"></a-asset>
          <a-asset item id="appleMtl" src="img/apple.mtl"></a-asset>

          <!--Template component: https://github.com/ngokevin/aframe-template-component-->

          <script id="plane" type="text/nunjucks">
                <a-plane class="link" height=".8" width=".8"
                phi-length="200"
                material="shader: flat; src: {{ thumb }}"
                         event-set__1="_event: mousedown; scale: 1 1 1"
                         event-set__2="_event: mouseup; scale: 1.2 1.2 1"
                         event-set__3="_event: mouseenter; scale: 1.2 1.2 1"
                         event-set__4="_event: mouseleave; scale: 1 1 1"
                         set-image="on: click; target: #image-360; src: {{ src }}"
                         update-raycaster="#cursor"
                         ></a-plane>
        </script>
          <!--End-->

      </a-assets>


      <a-sky
              id="image-360"
              radius="10"
              src="#city">
      </a-sky>

      <!-- Link. -->

          <a-entity template="src: #plane"
                    data-thumb="#city-thumb"
                    rotation="0 30 0"
                    position="-1 1.5 -1"
                    data-src="#city"
          ></a-entity>
          <a-entity template="src: #plane"
                    data-thumb="#desert-thumb"
                    position="0 1.5 -1.3"
                    data-src="#desert"
          ></a-entity>
          <a-entity template="src: #plane"
                    data-thumb="#mount-thumb"
                    rotation="0 -30 0"
                    position="1 1.5 -1"
                    data-src="#mount"
          ></a-entity>

      <a-entity ply-model="src: #applePly"
                rotation="-90 0 0"
                position="1.38 .6 .61"
                scale="0.1 0.1 0.1"
      ></a-entity>


      <!--<a-entity obj-model="obj: #appleObj; mtl: #appleMtl"-->
                <!--rotation="-90 0 0"-->
                <!--position="2 0 -1.3"-->
                <!--scale="0.1 0.1 0.1"-->
      <!--&gt;</a-entity>-->


      <a-camera
              position="0 1.6 0"
      >



          <a-cursor id="cursor"
                    animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                    animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                    event-set__1="_event: mouseenter; color: springgreen"
                    event-set__2="_event: mouseleave; color: black"
                    raycaster="objects: .link"></a-cursor>

      </a-camera>
  </a-scene>
  </body>
</html>
